# Claude Agent Desktop

åŸºäº Tauri 2.0 + React + TypeScript + Claude Agent SDK æ„å»ºçš„æ¡Œé¢ AI åŠ©æ‰‹åº”ç”¨ã€‚

é¡¹ç›®æ ¸å¿ƒç›®çš„æ˜¯ä¸ºäº†å­¦ä¹ ä½¿ç”¨Claude Agent SDKæ¥å¼€å‘ä»»æ„ä¸“å±åŠŸèƒ½çš„AI Agentï¼Œè¯¥SDKä¸ä½†å†…ç½®äº†å®Œæ•´çš„æ¨¡å‹è°ƒç”¨ã€ä»»åŠ¡åˆ†è§£ä¸è°ƒåº¦èƒ½åŠ›ï¼Œè¿˜æä¾›äº†å†…ç½®çš„æœ¬åœ°æ–‡ä»¶è¯»å†™Toolsï¼Œèƒ½å¤Ÿæä¾›åŸºæœ¬çš„Claude CodeåŒç­‰èƒ½åŠ›ã€‚

åªè¦åœ¨å…¶åŸºç¡€ä¸Šå¢åŠ æ–°çš„Toolsï¼Œå’Œç‰¹å®šç›®çš„çš„ç³»ç»Ÿæç¤ºè¯ï¼Œå°±å¯ä»¥å°†å®ƒå°è£…æˆä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ä¸“å±çš„AI Agentã€‚

è€Œä¸”å…¼å®¹æ‰€æœ‰å·²ç»ä¸ºClaude Codeæä¾›äº†å…¼å®¹æ¥å£çš„å›½äº§æ¨¡å‹å¹³å°çš„æ¥å£ã€‚ 

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **æµå¼å¯¹è¯**ï¼šå®æ—¶æ‰“å­—æœºæ•ˆæœï¼Œä½“éªŒæµç•…
- ğŸ’¬ **å¤šè½®å¯¹è¯**ï¼šä¿æŒä¸Šä¸‹æ–‡è®°å¿†ï¼Œæ”¯æŒå¤æ‚ä»»åŠ¡
- âš™ï¸ **ç³»ç»Ÿæç¤ºè¯**ï¼šé¢„è®¾å››ç§ä¸“ä¸šæ¨¡å¼ï¼ˆé€šç”¨åŠ©æ‰‹ã€æ•°æ®åˆ†æã€æ–‡æ¡ˆä¸“å®¶ã€æ·±åº¦è°ƒç ”ï¼‰
- ğŸ› ï¸ **å·¥å…·è°ƒç”¨**ï¼šæ”¯æŒæ–‡ä»¶è¯»å†™ã€ä»£ç æ‰§è¡Œã€æ–‡æœ¬æœç´¢ç­‰
- ğŸ¨ **ç°ä»£UI**ï¼šåŸºäº Ant Design Xï¼Œç•Œé¢ç¾è§‚æ˜“ç”¨
- â±ï¸ **æ‰§è¡Œè®¡æ—¶**ï¼šå®æ—¶æ˜¾ç¤ºå¯¹è¯æŒç»­æ—¶é—´
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šé…ç½®ä¿¡æ¯æœ¬åœ°ä¿å­˜ï¼Œæ— éœ€é‡å¤è®¾ç½®

## ğŸ”§ æŠ€æœ¯æ ˆ

**æ¡Œé¢åº”ç”¨**ï¼šTauri 2.0 + React 19 + TypeScript + Ant Design X + Vite

**åç«¯æœåŠ¡**ï¼šNode.js + Express + Claude Agent SDK + SSEï¼ˆæµå¼é€šä¿¡ï¼‰

**å‘½ä»¤è¡Œå®¢æˆ·ç«¯**ï¼šTypeScript + Claude Agent SDK + Chalk + Ora

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

æœ¬é¡¹ç›®åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š
1. **æ¡Œé¢åº”ç”¨** - è·¨å¹³å°çš„å›¾å½¢ç•Œé¢åº”ç”¨
2. **åç«¯æœåŠ¡** - æä¾› API æ¥å£
3. **å‘½ä»¤è¡Œå®¢æˆ·ç«¯** - äº¤äº’å¼ CLI å·¥å…·ï¼ˆç‹¬ç«‹ä½¿ç”¨ï¼‰

### æ¡Œé¢åº”ç”¨ + åç«¯æœåŠ¡

### å‰ææ¡ä»¶

1. **Node.js** >= 18.0.0 ([ä¸‹è½½](https://nodejs.org/))
2. **Rust** >= 1.70.0 ([å®‰è£…æŒ‡å—](https://www.rust-lang.org/tools/install))
3. **Anthropic API Key** ([è·å–åœ°å€](https://console.anthropic.com/))

### å®‰è£…ä¾èµ–

```bash
# å‰ç«¯ä¾èµ–
npm install

# åç«¯ä¾èµ–
cd backend && npm install && cd ..
```

### å¯åŠ¨åº”ç”¨

**æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
# macOS/Linux
./start.sh

# Windows
start.bat
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨**

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯
cd backend && npm run dev

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯
npm run tauri dev
```

### é…ç½®ä½¿ç”¨

1. åº”ç”¨å¯åŠ¨åæ‰“å¼€"è®¾ç½®"
2. é€‰æ‹©ç³»ç»Ÿæç¤ºè¯ç±»å‹ï¼ˆé€šç”¨åŠ©æ‰‹/æ•°æ®åˆ†æ/æ–‡æ¡ˆä¸“å®¶/æ·±åº¦è°ƒç ”ï¼‰
3. å¡«å†™ API Key æˆ– Auth Tokenï¼ˆè‡³å°‘ä¸€é¡¹ï¼‰
4. ä¿å­˜åå³å¯å¼€å§‹å¯¹è¯

### å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼ˆç‹¬ç«‹ä½¿ç”¨ï¼‰

å‘½ä»¤è¡Œå®¢æˆ·ç«¯ä¸ä¾èµ–æ¡Œé¢åº”ç”¨å’Œåç«¯æœåŠ¡ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼š

```bash
# è¿›å…¥å®¢æˆ·ç«¯ç›®å½•
cd agentClient

# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶å¹¶é…ç½®
cp config.example.json config.json
# ç¼–è¾‘ config.json å¡«å†™ API Key ç­‰ä¿¡æ¯

# è¿è¡Œ
npm run dev
```

è¯¦ç»†ä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹ [agentClient/README.md](agentClient/README.md)

## ğŸ¯ ç³»ç»Ÿæç¤ºè¯ç±»å‹

| ç±»å‹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **é€šç”¨åŠ©æ‰‹** | å…¨èƒ½å‹ AI åŠ©æ‰‹ | ç¼–ç¨‹ã€åˆ†æã€å†™ä½œç­‰é€šç”¨ä»»åŠ¡ |
| **æ•°æ®åˆ†æ** | æ•°æ®åˆ†æä¸“å®¶ | æ•°æ®å¤„ç†ã€ç»Ÿè®¡åˆ†æã€å¯è§†åŒ–å»ºè®® |
| **æ–‡æ¡ˆä¸“å®¶** | å†…å®¹åˆ›ä½œä¸“å®¶ | è¥é”€æ–‡æ¡ˆã€æŠ€æœ¯æ–‡æ¡£ã€åˆ›æ„å†™ä½œ |
| **æ·±åº¦è°ƒç ”** | è°ƒç ”åˆ†æä¸“å®¶ | å¸‚åœºç ”ç©¶ã€ç«å“åˆ†æã€è¶‹åŠ¿é¢„æµ‹ |

æ¯ç§ç±»å‹éƒ½æœ‰å®Œæ•´çš„ä¸“ä¸šæç¤ºè¯ï¼Œå¯åœ¨è®¾ç½®ä¸­æŸ¥çœ‹å’Œè‡ªå®šä¹‰ä¿®æ”¹ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
AIAgentDesktop/
â”œâ”€â”€ src/                        # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatInterface.tsx  # ä¸»èŠå¤©ç•Œé¢
â”‚   â”‚   â””â”€â”€ SettingsModal.tsx  # è®¾ç½®å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ types/                 # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°ï¼ˆAPIã€å­˜å‚¨ï¼‰
â”‚   â””â”€â”€ App.tsx               # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ backend/                   # åç«¯æºç 
â”‚   â”œâ”€â”€ server.ts             # Express æœåŠ¡å™¨
â”‚   â””â”€â”€ package.json          # åç«¯ä¾èµ–
â”‚
â”œâ”€â”€ agentClient/               # å‘½ä»¤è¡Œå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ client.ts             # CLI ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ config.json           # é…ç½®æ–‡ä»¶ï¼ˆéœ€åˆ›å»ºï¼‰
â”‚   â””â”€â”€ README.md            # ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ src-tauri/                # Tauri é…ç½®
â”‚   â”œâ”€â”€ src/lib.rs            # Rust ä¸»ç¨‹åº
â”‚   â””â”€â”€ tauri.conf.json       # Tauri é…ç½®
â”‚
â””â”€â”€ package.json              # å‰ç«¯ä¾èµ–
```

## ğŸ”Œ API æ¥å£

### åç«¯æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 3000ï¼‰

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/api/agent/prompts` | GET | è·å–é¢„è®¾æç¤ºè¯åˆ—è¡¨ |
| `/api/agent/create` | POST | åˆ›å»º Agent ä¼šè¯ |
| `/api/agent/query-stream` | POST | æµå¼æŸ¥è¯¢ï¼ˆSSEï¼‰ |
| `/api/agent/query` | POST | éæµå¼æŸ¥è¯¢ |
| `/api/agent/close` | POST | å…³é—­ä¼šè¯ |

### Claude Agent SDK å…³é”®é…ç½®

```typescript
const result = query({
  prompt: fullPrompt,
  options: {
    permissionMode: 'acceptEdits',
    maxTurns: 50,
    allowedTools: ['Read', 'Write', 'Bash', 'Grep', 'Glob'],
    includePartialMessages: true,  // å¯ç”¨æµå¼è¾“å‡º
  }
});
```

## ğŸš€ ç”Ÿäº§æ„å»º

### æ„å»ºæ¡Œé¢åº”ç”¨

```bash
npm run tauri build
```

æ„å»ºäº§ç‰©ä½ç½®ï¼š
- **macOS**: `src-tauri/target/release/bundle/macos/é€šç”¨Agent.app`
- **Windows**: `src-tauri/target/release/bundle/msi/`
- **Linux**: `src-tauri/target/release/bundle/deb/`

### éƒ¨ç½²åç«¯æœåŠ¡å™¨

åç«¯éœ€è¦ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œï¼š

1. å°† `backend/` ç›®å½•å¤åˆ¶åˆ°æœåŠ¡å™¨æˆ–ç”¨æˆ·æœºå™¨
2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   cd backend
   npm install
   ```
3. å¯åŠ¨åç«¯æœåŠ¡ï¼š
   ```bash
   npm start
   ```
   æˆ–å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰ï¼š
   ```bash
   npm run dev
   ```

åç«¯é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`ï¼Œå‰ç«¯åº”ç”¨ä¼šè‡ªåŠ¨è¿æ¥æ­¤åœ°å€ã€‚

## âš ï¸ å¸¸è§é—®é¢˜

### åç«¯æ— æ³•å¯åŠ¨ - ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :3000

# æˆ–ä¿®æ”¹ backend/server.ts ä¸­çš„ PORT å˜é‡
```

### åˆå§‹åŒ–å¤±è´¥

1. ç¡®è®¤åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
2. éªŒè¯ API Key æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°å’Œåç«¯æ—¥å¿—

### æµå¼è¾“å‡ºä¸å·¥ä½œ

ç¡®ä¿åç«¯ä½¿ç”¨äº† `includePartialMessages: true` é€‰é¡¹ã€‚

## ğŸ“ é…ç½®è¯´æ˜

### è®¤è¯é…ç½®

- **API Key** æˆ– **Auth Token** è‡³å°‘å¡«å†™ä¸€é¡¹
- é…ç½®ä¿å­˜åœ¨æœ¬åœ° localStorage
- Base URL é»˜è®¤ä¸º `https://api.anthropic.com`

### å…è®¸çš„å·¥å…·

- `Read` - è¯»å–æ–‡ä»¶
- `Write` - å†™å…¥æ–‡ä»¶
- `Bash` - æ‰§è¡Œå‘½ä»¤
- `Grep` - æ–‡æœ¬æœç´¢
- `Glob` - æ–‡ä»¶æŸ¥æ‰¾

## ğŸ¨ ç•Œé¢åŠŸèƒ½

- **è®¡æ—¶å™¨**ï¼šå¯¹è¯æ‰§è¡Œæ—¶æ˜¾ç¤ºæŒç»­æ—¶é—´
- **åœæ­¢æŒ‰é’®**ï¼šéšæ—¶ä¸­æ–­é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡
- **æ¸…ç©ºå¯¹è¯**ï¼šæ¸…é™¤å†å²è®°å½•ï¼Œé‡æ–°å¼€å§‹
- **æ¬¢è¿ç•Œé¢**ï¼šæä¾›å¿«æ·æç¤ºè¯ï¼Œå¿«é€Ÿå¼€å§‹å¯¹è¯

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [Claude API æ–‡æ¡£](https://docs.anthropic.com/)
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [Ant Design X](https://x.ant.design/)
- [Claude Agent SDK](https://github.com/anthropics/claude-agent-sdk-typescript)
